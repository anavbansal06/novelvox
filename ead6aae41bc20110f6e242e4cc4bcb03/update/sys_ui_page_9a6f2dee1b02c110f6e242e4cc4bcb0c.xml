<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[/*! RESOURCE: /scripts/openframe/latest/openFrameAPI.min.js */
/*! openFrameAPI v1.0.2 | (c) 2014-2018 [ServiceNow], All Rights Reserved */
var SNC;
(SNC = window.SNC || {}).DataValidation = function() {
    var e = 256,
        n = 4400,
        t = ["sysparm_stack", "sysparm_goto_url"];

    function i(e) {
        throw e
    }
    return {
        contains: function(e, n) {
            for (var t in e)
                if (e.hasOwnProperty(t) && e[t] == n) return !0;
            return !1
        },
        stringValidation: function(n, t, o) {
            return "string" != typeof n && i("Input is incorrect. Only string is supported"), t && o ? n.length > o && i("Length cannot be more than " + o) : t && n.length > e && i("Length cannot be more than " + e), !0
        },
        numberValidation: function(e) {
            return ("number" != typeof e || e < 0) && i("Input is incorrect. Only number is supported and it should be greater than 0"), !0
        },
        objectValidation: function(e) {
            return null != e && "object" == typeof e || i("Input is incorrect. Only object is supported"), !0
        },
        objectSizeValidation: function(e) {
            return !(e.length > n)
        },
        queryStringValidation: function(e) {
            for (var n = 0; n < t.length; n++) - 1 != e.indexOf(t[n]) && i("Url query string cannot have redirects");
            return !0
        },
        customURLValidation: function(e) {
            return 1 == /^(?:[a-z]+:)?\/\//i.test(e) && i("Custom url cannot be absolute"), !0
        },
        throwError: i
    }
}(), (SNC = window.SNC || {}).Communication = function() {
    var e = {
            INIT: "openframe_init",
            SHOW: "openframe_show",
            HIDE: "openframe_hide",
            VISIBLE: "openframe_visible",
            REQUEST: "openframe_request",
            RESPONSE: "openframe_response",
            GET_CONFIG: "openframe_get_config",
            SET_SIZE: "openframe_set_size",
            SET_HEADER_TITLE: "openframe_set_header_title",
            SET_HEADER_TITLE_ICON: "openframe_set_header_title_icon",
            SET_HEADER_ICONS: "openframe_set_header_icons",
            SET_TOP_FRAME_URL: "openframe_set_top_frame_url",
            COMMUNICATION_FAILURE: "openframe_communication_failure"
        },
        n = "NOW.PostMessage",
        t = 3e3,
        i = {},
        o = "*",
        r = SNC.DataValidation;

    function a(t, i, a) {
        var s, E, c = "";
        r.contains(e, t) && (E = {
            type: n,
            eventName: t,
            args: i
        }, top.postMessage ? o || a ? (s = JSON.stringify(E), r.objectSizeValidation(s) || (c = "Message payload exceeds the supported limit")) : c = "The Top domain is undefined for cross domain messaging" : c = "Browser does not support cross domain messaging", c ? u(e.COMMUNICATION_FAILURE, c) : top.postMessage(s, o))
    }

    function s(e, n) {
        var t = i[e];
        t || (t = [], i[e] = t), t.push(n)
    }

    function u(e, n) {
        var t, o = i[e];
        if (o && 0 != o.length)
            for (t = 0; t < o.length; ++t) {
                o[t].call(null, n)
            }
    }
    return SNC.registeredPostMessageHandler || window.postMessage && (window.addEventListener("message", function(e) {
        var t;
        try {
            t = JSON.parse(e.data)
        } catch (e) {
            return
        }!t.type != n && u(t.eventName, t.args)
    }, !1), SNC.registeredPostMessageHandler = !0), {
        EVENTS: e,
        init: function(n, i) {
            ! function(n, i, r) {
                var a = !1;
                try {
                    n.request(e.INIT, {}, function(e) {
                        a || (a = !0, o = e.topDomain, i(e.result))
                    }, r, !0)
                } catch (e) {
                    a = !0, r(e)
                    console.log("INIT IS not working");
                }
                setTimeout(function() {
                    a || (a = !0, r("Openframe init request timed out"))
                }, t)
            }(this, n, i)
        },
        contains: function(e, n) {
            for (var t in e)
                if (e.hasOwnProperty(t) && e[t] == n) return !0;
            return !1
        },
        publish: a,
        subscribe: s,
        request: function(n, t, o, u, E) {
            if (r.contains(e, n)) {
                var c = n + "_" + (new Date).getTime() * Math.random(),
                    l = {},
                    _ = this;
                l.id = c, l.method = n, l.payload = t, a(e.REQUEST, l, E), s(e.RESPONSE, function(e) {
                    var n, t, r;
                    c == e.context.id && (n = _.EVENTS.RESPONSE, t = arguments.callee, (r = i[n]) && 0 != r.length && -1 != r.indexOf(t) && r.splice(r.indexOf(t), 1), e.isSuccess ? o(e.context.result) : u(e.context.result))
                })
            }
        }
    }
}(), SNC.OpenFrame = function() {
    var e = "1.0.2",
        //var e = "1.0.7",
        n = SNC.Communication,
        t = SNC.DataValidation;
    return {
        EVENTS: {
            HEADER_ICON_CLICKED: "openframe_header_icon_clicked",
            OPENFRAME_SHOWN: "openframe_shown",
            OPENFRAME_HIDDEN: "openframe_hidden",
            OPENFRAME_BEFORE_DESTROY: "openframe_before_destroy",
            COMMUNICATION_EVENT: "openframe_communication",
            //openframe_awa_agent_presence: "openframe_awa_agent_presence",
            COMMUNICATION_FAILURE: "openframe_communication_failure"
        },
        init: function(e, t, i) {
            n.init(function() {
                n.request(n.EVENTS.GET_CONFIG, e, t, i)
            }, i)
        },
        version: function() {
            return e
        },
        show: function() {
            n.publish(n.EVENTS.SHOW)
        },
        hide: function() {
            n.publish(n.EVENTS.HIDE)
        },
        isVisible: function(e, t) {
            n.request(n.EVENTS.VISIBLE, {}, e, t)
        },
        subscribe: function(e, i) {
            console.log("SUBSCRIBE IS WORKING NV_SOFTPHONE");
            n.contains(this.EVENTS, e) ? n.subscribe(e, i) : t.throwError(e + " is not a valid event for subscription")
        },
        setTitle: function(e) {
            t.stringValidation(e, !0) && n.publish(n.EVENTS.SET_HEADER_TITLE, {
                title: e
            })
        },
        setSubtitle: function(e) {
            t.stringValidation(e, !0) && n.publish(n.EVENTS.SET_HEADER_TITLE, {
                subtitle: e
            })
        },
        setSize: function(e, i) {
            t.numberValidation(e) && t.numberValidation(i) && n.publish(n.EVENTS.SET_SIZE, {
                width: e,
                height: i
            })
        },
        setIcons: function(e) {
            t.objectValidation(e) && n.publish(n.EVENTS.SET_HEADER_ICONS, e)
        },
        setTitleIcon: function(e) {
            t.objectValidation(e) && n.publish(n.EVENTS.SET_HEADER_TITLE_ICON, e)
        },
        openServiceNowForm: function(e) {
            t.objectValidation(e) && e.query && t.queryStringValidation(e.query) && n.publish(n.EVENTS.SET_TOP_FRAME_URL, {
                form: e
            })
        },
        openServiceNowList: function(e) {
            t.objectValidation(e) && e.query && t.queryStringValidation(e.query) && n.publish(n.EVENTS.SET_TOP_FRAME_URL, {
                list: e
            })
        },
        openCustomURL: function(e) {
            var i = {
                url: e
            };
            t.stringValidation(i.url, !0, 2083) && t.customURLValidation(i.url) && n.publish(n.EVENTS.SET_TOP_FRAME_URL, {
                url: i
            })
        }
    }
}();
var openFrameAPI = SNC.OpenFrame;

var config = {
    title: "NOVELVOX POPUP",
};

/*function handleCommunicationEvent(context) {
	console.log("Communication from Topframe");
		//console.log("Communication from Topframe", context);
}*/

function initSuccess(snConfig) {
    //console.log("OpenFrame Communication Config popup");
    console.log("openframe configuration", snConfig);
    //register for communication event from TopFrame
    //openFrameAPI.subscribe(openFrameAPI.EVENTS.COMMUNICATION_EVENT,
    //handleCommunicationEvent);
}

function initFailure(error) {
    console.log("OpenFrame init failed..", error);
}
openFrameAPI.init(config, initSuccess, initFailure);]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_769265_novelvox_init_detail.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
	<p> Hello </p>
</j:jelly>]]></html>
        <name>init_detail</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-03-08 08:21:44</sys_created_on>
        <sys_id>9a6f2dee1b02c110f6e242e4cc4bcb0c</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>init_detail</sys_name>
        <sys_package display_value="NovelVox" source="x_769265_novelvox">ead6aae41bc20110f6e242e4cc4bcb03</sys_package>
        <sys_policy/>
        <sys_scope display_value="NovelVox">ead6aae41bc20110f6e242e4cc4bcb03</sys_scope>
        <sys_update_name>sys_ui_page_9a6f2dee1b02c110f6e242e4cc4bcb0c</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-03-09 07:30:37</sys_updated_on>
    </sys_ui_page>
</record_update>
